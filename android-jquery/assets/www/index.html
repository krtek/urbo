<!DOCTYPE HTML>
<html>
<head>
    <!-- !!!REMOVE THIS WHEN GOING LIVE!!!, prevent cache -->
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Urbo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script src="js/urbo.js"></script>
    <script src="js/urbo_settings.js"></script>
</head>
<body>
<div data-role="page" id="menu">
    <div data-role="header">
        <h1>Urbo</h1>
    </div>
    <div data-role="content">
        <p><a href="#create" data-icon="plus" data-role="button" data-transition="flip">Nový urbo případ</a></p>
        <p><a href="#" data-icon="home" data-role="button">Moje urbo případy</a></p>
        <p><a href="#" data-icon="info" data-role="button">O aplikaci</a></p>
    </div>
</div>

<div data-role="page" id="create">
    <div data-role="header">
        <h1>Urbo</h1>
        <a href="#menu" data-icon="delete">Zrušit</a>
        <a href="#" data-icon="check" onclick="sendUrboItemToServer();">Odeslat</a>
    </div>
    <div data-role="content">
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="title">Titulek:</label>
            <input type="text" name="title" id="title" value="" placeholder="Titulek"/>
        </div>
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="description">Podrobnosti:</label>
            <textarea cols="40" rows="8" name="description" id="description" placeholder="Podrobnosti.."></textarea>
        </div>
        <div class="ui-grid-a">
            <div class="ui-block-a">
                <img id="mapThumbnail" style="height: 100px; width: 100px;" />
                <a href="#map_dialog" data-rel="dialog" data-transition="pop" data-role="button">Změnit místo</a>
            </div>
            <div class="ui-block-b">
                <img id="photoThumbnail" style="height: 100px; width: 100px;"/>
                <a href="#photo_dialog" data-rel="dialog" data-transition="pop" data-role="button">Přidat foto</a>
            </div>
        </div>
    </div>
</div>

<div data-role="dialog" id="map_dialog">
    <div data-role="header">
        <h1>Vybrat místo</h1>
        <a href="#" data-icon="check" onclick="locationManuallySelected();">Hotovo</a>
    </div>
    <div data-role="content">
        <div id="mapWindow" style="width: 100%; min-height: 400px; height: 100%;"></div>
    </div>
</div>

<div data-role="dialog" id="photo_dialog">
    <div data-role="header">
        <h1>Vybrat fotku</h1>
    </div>
    <div data-role="content">
        <a href="#" data-role="button" onClick="getPhoto(Camera.PictureSourceType.PHOTOLIBRARY);">Z galerie</a>
        <a href="#" data-role="button" onClick="getPhoto(Camera.PictureSourceType.CAMERA);">Vyfotit</a>
    </div>
</div>


<script>
    $(document).ready(function() {
       getGpsCoordinates();
    });

    $(document).bind('pageshow', function(e, data) {
        // show page
        var $page = $(e.target);
        if ($page.attr('id') == 'map_dialog') {
            showMapToAdjust($('body').data('latitude'), $('body').data('longitude'));
        }
    });
</script>
</body>
</html>